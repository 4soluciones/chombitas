<table class="table table-bordered" id="report-payments">
    <thead>
    <tr class="text-white bg-dark text-uppercase text-center">
        <td class="col-form-label col-form-label-lg">ID</td>
        <td class="col-form-label col-form-label-lg">EMPLEADO</td>
        <td class="col-form-label col-form-label-lg">REMUNERACION INICIAL</td>
        <td class="col-form-label col-form-label-lg">PAGAR</td>
        <td class="col-form-label col-form-label-lg">FECHA</td>
        <td class="col-form-label col-form-label-lg">REMUNERACION PAGADA</td>
        <td class="col-form-label col-form-label-lg">ENTIDAD DE PAGO</td>
        <td class="col-form-label col-form-label-lg">CODIGO OPERACION</td>
        <td class="col-form-label col-form-label-lg">ESTADO</td>
    </tr>
    </thead>
    <tbody id="tbl-items">
    {% for w in salary_dict %}
        <tr>
            <td class="col-form-label col-form-label-lg align-middle text-center">{{ w.id }}</td>
            <td class="col-form-label col-form-label-lg align-middle text-center">{{ w.names }}</td>
            <td class="col-form-label col-form-label-lg align-middle text-center">
                S/ {{ w.salary_initial|safe }}</td>
            <td class="col-form-label col-form-label-lg align-middle text-center">
                <button type="button"
                        class="btn btn-success btn-show-payments btn-block"
                        data-toggle="modal"
                        data-target="#modal-payment-salary"
                        pk="{{ w.id }}"><i
                        class="fas fa-dollar-sign"></i> PAGAR
                </button>
            </td>
            {% for s in w.salary_set %}
                <td class="col-form-label col-form-label-lg align-middle text-center">{{ s.date|date:"d-m-y" }}</td>
                {% for c in s.cash_flow_set %}
                    <td class="col-form-label col-form-label-lg align-middle text-center">S/ {{ c.salary_pay|safe }}</td>
                    <td class="col-form-label col-form-label-lg align-middle text-center">{{ c.cash }}</td>
                    <td class="col-form-label col-form-label-lg align-middle text-center">{{ c.cod }}</td>
                    <td class="col-form-label col-form-label-lg align-middle text-center"></td>
                {% endfor %}
            {% endfor %}
        </tr>

    {% endfor %}

    </tbody>
</table>

<script type="text/javascript">

    $(document).on('click', '.btn-show-payments', function () {
        let _worker_id = $(this).attr('pk');

        $.ajax({
            url: '/accounting/get_salary_pay/',
            async: true,
            dataType: 'json',
            type: 'GET',
            data: {
                'worker_id': _worker_id,
                'start-date': $('#id_date_initial').val(),
                'end-date': $('#id_date_final').val(),
            },
            success: function (response) {
                $('#pay-salary').html(response.grid);
            },
            fail: function (response) {
                console.log("error");
            }
        });
    });
</script>